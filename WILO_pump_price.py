import tkinter as tk  # Імпорт бібліотеки для створення GUI у Python та надання їй ім'я tk для подальшого використання.
from tkinter import messagebox  # Імпорт підмодуля tkinter для відображення вікон повідомлень.


# Функція, яка буде викликана при натисканні кнопки "Зберегти" у GUI.
def save_currency_rate():
    new_rate = entry.get()  # Отриммання значення, яке користувач ввів у поле для введення курсу валют.
    # Значення зберігається у змінній new_rate.

    # Заміна коми на крапку у тексті для коректної обробки чисел з плаваючою комою.
    new_rate = new_rate.replace(',', '.')

    if new_rate.replace('.', '', 1).isdigit():  # Перевірка, чи є введений текст коректним числом
        # (цілим або з плаваючою комою). Також переконуємося, що у числі може бути тільки одна крапка.
        try:  # Початок блоку спроби, який служить для обробки можливих помилок під час виконання коду всередині блоку.
            # Цей блок відкриває файл для запису і використовує його у контексті with,
            # щоб автоматично закрити файл після завершення роботи з ним.
            with open('currency_rate.txt', 'w') as file:
                file.write(new_rate)  # Значення new_rate записується у відкритий файл.
            # Якщо операція збереження пройшла успішно, виводиться вікно з повідомленням про успіх.
            messagebox.showinfo("Успішно", f"Курс валют оновлено: {new_rate}")
        # Якщо виникає помилка під час збереження, вона обробляється і
        # виводиться повідомлення про помилку з описом помилки.
        except Exception as e:
            messagebox.showerror("Помилка", f"Не вдалося зберегти курс валют: {str(e)}")
    # Якщо введений текст не є коректним числом, виводиться повідомлення про помилку.
    else:
        messagebox.showwarning("Увага", "Введіть коректний курс валют (число) перед збереженням!")


# Функція для завантаження збереженого курсу валют при запуску програми.
def load_currency_rate():
    try:
        # Цей блок відкриває файл для читання та використовує його у контексті with,
        # щоб автоматично закрити файл після завершення роботи з ним.
        with open('currency_rate.txt', 'r') as file:
            rate = file.read()
            if rate:
                # Очищення поля введення та вставлення збереженого курсу.
                entry.delete(0, 'end')
                entry.insert(0, rate)
    except Exception as e:
        pass  # Обробка помилок завантаження курсу валют, якщо такі є.


root = tk.Tk()  # Створення головного вікна програми.
root.title("Курс валют")  # Встановлення заголовку головного вікна.

label = tk.Label(root, text="Курс валют:")  # Створення текстового мітки (Label) з текстом "Курс валют:"
label.pack()  # Виведення мітки на екран.

entry = tk.Entry(root)  # Створення поля для введення тексту (Entry)
entry.pack()  # Виведення поля для введення на екран.

# Створення кнопки з текстом "Зберегти" і прив'язка її до функції save_currency_rate
save_button = tk.Button(root, text="Зберегти", command=save_currency_rate)
save_button.pack()  # Виведення кнопки на екран.

load_currency_rate()  # Виклик функції для завантаження збереженого курсу валют

root.mainloop()  # Запуск головного циклу обробки подій tkinter,
# який забезпечує відображення та взаємодію з GUI-додатком.
